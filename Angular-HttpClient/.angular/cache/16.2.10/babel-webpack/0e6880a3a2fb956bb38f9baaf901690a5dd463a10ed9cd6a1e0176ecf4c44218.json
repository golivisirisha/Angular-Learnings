{"ast":null,"code":"export {};","map":{"version":3,"names":[],"sources":["C:\\Users\\DELL\\Downloads\\gh\\OneDrive\\Desktop\\Sails tasks\\Angular-HttpClient\\src\\app\\Services\\task.service.ts"],"sourcesContent":["import {Injectable,inject} from '@angular/core';\r\nimport { HttpClient,HttpErrorResponse } from '@angular/common/http';\r\nimport { Task } from 'src/Models/Task';\r\nimport {map,catchError} from 'rxjs/operators';\r\nimport {Subject,throwError} from 'rxjs';\r\nimport{LoggingService} from \r\n\r\n@Injectable({\r\n    providedIn:'root'\r\n})\r\n\r\nexport class TaskService{\r\n\r\n    http:HttpClient=inject(HttpClient);\r\n    loggingService:LoggingService=inject(LoggingService);\r\n    errorSubject=new Subject<HttpErrorResponse>();\r\n\r\n    CreateTask(task:Task){\r\n        this.http.post<{name:string}>('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks.json',task)\r\n   .subscribe({error:(err)=>{\r\n    this.errorSubject.next(err);\r\n\r\n   }\r\n    // this.fetchAllTasks();\r\n    });\r\n\r\n}\r\n\r\n    DeleteTask(id:string |undefined){\r\n        this.http.delete('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks/'+ id +'.json')\r\n    .subscribe({error:(err)=>{\r\n        this.errorSubject.next(err);\r\n    \r\n       }\r\n        // this.fetchAllTasks();\r\n        });\r\n\r\n\r\n\r\n}\r\n\r\n    DeleteAllTask(){\r\n        this.http.delete('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks.json')\r\n        .subscribe({error:(err)=>{\r\n            this.errorSubject.next(err);\r\n        \r\n           }\r\n            // this.fetchAllTasks();\r\n            });\r\n       \r\n\r\n    }\r\n\r\n    GetAlltasks(){\r\n       return this.http.get<{[key:string]:Task}>('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks.json')\r\n    .pipe(map((response)=>{\r\n\r\n      //trasforming data\r\n      let tasks=[];\r\n\r\n      for(let key in response){\r\n        if(response.hasOwnProperty(key)){\r\n          tasks.push({...response[key],id:key});\r\n\r\n        }\r\n       \r\n      }\r\n\r\n      return tasks;\r\n\r\n    }),catchError((err)=>{\r\n        //write the logic to log errors.\r\n        return throwError(()=>err );\r\n\r\n\r\n    }))\r\n    \r\n    }\r\n    UpdateTask(id: string | undefined,data:Task){\r\n        this.http.put('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks'+id+'.json',data)\r\n        .subscribe();\r\n\r\n    }\r\n    \r\n\r\n}"],"mappings":""},"metadata":{},"sourceType":"module","externalDependencies":[]}