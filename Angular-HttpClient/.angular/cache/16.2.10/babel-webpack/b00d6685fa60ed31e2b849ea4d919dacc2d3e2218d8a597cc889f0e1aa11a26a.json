{"ast":null,"code":"import { inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nexport class TaskService {\n  constructor() {\n    this.http = inject(HttpClient);\n  }\n  CreateTask(task) {\n    this.http.post('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks.json', task).subscribe(error => {}\n    // this.fetchAllTasks();\n    );\n  }\n\n  DeleteTask(id) {\n    this.http.delete('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks/' + id + '.json').subscribe({\n      error: res => {\n        //   this.fetchAllTasks();\n        this.errorSubject.next();\n      }\n    });\n  }\n  DeleteAllTask() {\n    this.http.delete('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks.json').subscribe();\n    //    this.fetchAllTasks();\n  }\n\n  GetAlltasks() {\n    return this.http.get('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks.json').pipe(map(response => {\n      //trasforming data\n      let tasks = [];\n      for (let key in response) {\n        if (response.hasOwnProperty(key)) {\n          tasks.push({\n            ...response[key],\n            id: key\n          });\n        }\n      }\n      return tasks;\n    }));\n  }\n  UpdateTask(id, data) {\n    this.http.put('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks' + id + '.json', data).subscribe();\n  }\n  static #_ = this.ɵfac = function TaskService_Factory(t) {\n    return new (t || TaskService)();\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: TaskService,\n    factory: TaskService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["inject","HttpClient","map","TaskService","constructor","http","CreateTask","task","post","subscribe","error","DeleteTask","id","delete","res","errorSubject","next","DeleteAllTask","GetAlltasks","get","pipe","response","tasks","key","hasOwnProperty","push","UpdateTask","data","put","_","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\DELL\\Downloads\\gh\\OneDrive\\Desktop\\Sails tasks\\Angular-HttpClient\\src\\app\\Services\\task.service.ts"],"sourcesContent":["import {Injectable,inject} from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Task } from 'src/Models/Task';\r\nimport {map} from 'rxjs/operators';\r\n\r\n@Injectable({\r\n    providedIn:'root'\r\n})\r\n\r\nexport class TaskService{\r\n\r\n    http:HttpClient=inject(HttpClient);\r\n    errorSubject\r\n\r\n    CreateTask(task:Task){\r\n        this.http.post<{name:string}>('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks.json',task)\r\n   .subscribe((error)=>{\r\n\r\n   }\r\n    // this.fetchAllTasks();\r\n    );\r\n\r\n}\r\n\r\n    DeleteTask(id:string |undefined){\r\n        this.http.delete('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks/'+ id +'.json')\r\n    .subscribe({error:(res)=>{\r\n    //   this.fetchAllTasks();\r\n    this.errorSubject.next();\r\n    }});\r\n\r\n\r\n\r\n}\r\n\r\n    DeleteAllTask(){\r\n        this.http.delete('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks.json')\r\n        .subscribe();\r\n        //    this.fetchAllTasks();\r\n\r\n    }\r\n\r\n    GetAlltasks(){\r\n       return this.http.get<{[key:string]:Task}>('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks.json')\r\n    .pipe(map((response)=>{\r\n\r\n      //trasforming data\r\n      let tasks=[];\r\n\r\n      for(let key in response){\r\n        if(response.hasOwnProperty(key)){\r\n          tasks.push({...response[key],id:key});\r\n\r\n        }\r\n       \r\n      }\r\n\r\n      return tasks;\r\n\r\n    }))\r\n    \r\n    }\r\n    UpdateTask(id: string | undefined,data:Task){\r\n        this.http.put('https://angular-http-client-360ac-default-rtdb.firebaseio.com/tasks'+id+'.json',data)\r\n        .subscribe();\r\n\r\n    }\r\n    \r\n\r\n}"],"mappings":"AAAA,SAAmBA,MAAM,QAAO,eAAe;AAC/C,SAASC,UAAU,QAAQ,sBAAsB;AAEjD,SAAQC,GAAG,QAAO,gBAAgB;;AAMlC,OAAM,MAAOC,WAAW;EAJxBC,YAAA;IAMI,KAAAC,IAAI,GAAYL,MAAM,CAACC,UAAU,CAAC;;EAGlCK,UAAUA,CAACC,IAAS;IAChB,IAAI,CAACF,IAAI,CAACG,IAAI,CAAgB,0EAA0E,EAACD,IAAI,CAAC,CAClHE,SAAS,CAAEC,KAAK,IAAG,CAEpB;IACC;KACC;EAEL;;EAEIC,UAAUA,CAACC,EAAoB;IAC3B,IAAI,CAACP,IAAI,CAACQ,MAAM,CAAC,sEAAsE,GAAED,EAAE,GAAE,OAAO,CAAC,CACxGH,SAAS,CAAC;MAACC,KAAK,EAAEI,GAAG,IAAG;QACzB;QACA,IAAI,CAACC,YAAY,CAACC,IAAI,EAAE;MACxB;IAAC,CAAC,CAAC;EAIP;EAEIC,aAAaA,CAAA;IACT,IAAI,CAACZ,IAAI,CAACQ,MAAM,CAAC,0EAA0E,CAAC,CAC3FJ,SAAS,EAAE;IACZ;EAEJ;;EAEAS,WAAWA,CAAA;IACR,OAAO,IAAI,CAACb,IAAI,CAACc,GAAG,CAAsB,0EAA0E,CAAC,CACvHC,IAAI,CAAClB,GAAG,CAAEmB,QAAQ,IAAG;MAEpB;MACA,IAAIC,KAAK,GAAC,EAAE;MAEZ,KAAI,IAAIC,GAAG,IAAIF,QAAQ,EAAC;QACtB,IAAGA,QAAQ,CAACG,cAAc,CAACD,GAAG,CAAC,EAAC;UAC9BD,KAAK,CAACG,IAAI,CAAC;YAAC,GAAGJ,QAAQ,CAACE,GAAG,CAAC;YAACX,EAAE,EAACW;UAAG,CAAC,CAAC;;;MAMzC,OAAOD,KAAK;IAEd,CAAC,CAAC,CAAC;EAEH;EACAI,UAAUA,CAACd,EAAsB,EAACe,IAAS;IACvC,IAAI,CAACtB,IAAI,CAACuB,GAAG,CAAC,qEAAqE,GAAChB,EAAE,GAAC,OAAO,EAACe,IAAI,CAAC,CACnGlB,SAAS,EAAE;EAEhB;EAAC,QAAAoB,CAAA,G;qBAzDQ1B,WAAW;EAAA;EAAA,QAAA2B,EAAA,G;WAAX3B,WAAW;IAAA4B,OAAA,EAAX5B,WAAW,CAAA6B,IAAA;IAAAC,UAAA,EAHT;EAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}